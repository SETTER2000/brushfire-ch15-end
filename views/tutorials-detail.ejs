<div ng-controller="tutorialsDetailPageController" ng-cloak>
  <div class="container">
    <div class="row">
      <div class="well">
        <div class="list-group">


         
          <!-- Tutorial Details -->
          <div class="tutorials-detail list-group-item">
            <div class="col-md-8" style="margin-top: 25px">
              <h1 class="list-group-item-heading">
              <%= tutorial.title %>
              </h1>
              <p class="list-group-item-text" style="font-size: 1.2em">
                <%= tutorial.description %>
              </p>
              <ul class="list-inline list-unstyled">
                <li>|</li>
                <li>
                  <span>by: <i class="fa fa-user"></i>  <%= tutorial.owner %> </span>
                </li>
                <li>|</li>
                <li>
                  <span><i class="fa fa-calendar"></i>  <%= tutorial.createdOn %></span>
                </li>
                <li>|</li>
                <li>
                  <span><i class="fa fa-video-camera"></i>  <%= tutorial.totalTime %> </span>
                </li>
                <li>|</li>
                <li>
                  <% for (i = 0; i < tutorial.stars; i++) {  %>
                  <span class="fa fa-star"></span>
                  <% } %>
                  <% for (i = 0; i < 5-tutorial.stars; i++) {  %>
                  <span class="fa fa-star-o"></span>
                  <% } %>
                </li>
                <li>|</li>
              </ul>
            </div>
            <div class="col-md-4 text-center" style="margin-top: 25px">
              <% if (me) { %>
                <ul class="list-inline list-unstyled">
                  <li><a href="/tutorials/1/edit" class="btn btn-default">edit</a></li>
                  <li><a ng-click="deleteTutorial()" class="btn btn-default">
                      <span ng-show="!tutorialDetails.tutorialLoading">delete</span>
                      <span class="overlord-loading-spinner fa fa-spinner" ng-show="tutorialDetails.tutorialLoading" ></span>
                      <span ng-show="tutorialDetails.tutorialLoading">deleting...</span>
                      </a></li>
                  <li><a href="/tutorials/:id/videos/new" class="btn btn-default">add video</a></li>
                </ul>
              <% } %>
            </div>
          </div>
        </div>


        <!-- Videos -->
        <h2>Table of Contents</h2>
        <ul class="list-group list-unstyled">
          <% _.forEach(tutorial.videos, function(video){ %>
            <a href="/showVideo" class="list-group-item">
              <li><%= video.order %> - <%= video.title %>
                <ul class="list-inline  pull-right">
                  <li><span class="fa fa-video-camera"> <%= video.duration %> </li>
                    <% if (me) { %>
                      <li><button ng-click="editVideo()">edit</button></li>
                      <li><button ng-click="deleteVideo()">
                        <span ng-show="!tutorialDetails.loading">delete</span>
                        <span class="overlord-loading-spinner fa fa-spinner" ng-show="tutorialDetails.loading" ></span>
                        <span ng-show="tutorialDetails.loading">deleting video...</span>
                      </button>
                    <% } %>
                  </li>
                </ul>
              </li>
            </a>
          <% }) %>
        </ul>
      </div>
    </div>
  </div>
</div>
